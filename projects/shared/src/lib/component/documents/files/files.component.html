<!--
  RERO ILS UI
  Copyright (C) 2024 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

@if (files?.length > 0) {
  <div class="border-1 surface-border border-round text-center pt-3 px-1 mt-2">
    <p-carousel
      [value]="files"
      [numVisible]="5"
      [numScroll]="5"
      [circular]="false"
      [responsiveOptions]="responsiveOptions"
    >
      <ng-template let-file pTemplate="item">
        @if (file.thumbnail) {
            <img
              src="{{ file.thumbnail }}"
              [alt]="file.label"
              class="w-6 shadow-1 border-300 border-1 mb-1"
            />
          } @else {
            <div
            class="files-icon"
          > <i class="text-muted fa fa-5x pb-1" [ngClass]="file.mimetype | faIconClass: 'file'"></i></div>
          }
            <div
              class="action flex align-items-center justify-content-center gap-2"
            >
              @if (file.preview) {
                <a
                  href="{{ file.label }}"
                  (click)="preview(file); $event.preventDefault()"
                >
                  <i class="fa fa-eye mx-1"></i>
                </a>
              } @if (file.download) {
                <a [href]="file.download" download>
                  <i class="fa fa-download mx-1"></i>
                </a>
              }
            </div>
            <small>{{ file.label }}</small>
      </ng-template>
    </p-carousel>
  </div>
}

<ng-template #previewModal>
    @if (previewFile) {
    <div class="modal-header">
      <h4 id="dialog-sizes-name1" class="modal-title pull-left">{{ previewFile.label }}</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="previewModalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <iframe id="preview-iframe" width="100%" height="800px" [src]="previewFile.url"
        style="border: none;"></iframe>
    </div>
  }
</ng-template>
